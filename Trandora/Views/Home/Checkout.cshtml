@model IEnumerable<Trandora.Models.CartItem>

@{
    ViewData["Title"] = "Checkout";
}
<link href="~/css/Checkout.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="~/css/Index.css" rel="stylesheet" />

<header>
    <img src="https://i.ibb.co/n43vmzW/logo.png" class="logo" alt="logo" />

    <nav class="nav-option-large">
          <a asp-controller="Home" asp-action="Index">Home</a>
        <a asp-controller="Home" asp-action="Products">Products</a>
        <a asp-controller="Home" asp-action="Cart">Cart</a>
        <a asp-controller="Home" asp-action="AllOrders">Orders</a>
        <a asp-controller="Home" asp-action="About">About</a>
        <a asp-controller="Home" asp-action="Contact">Contact</a>
        <a asp-controller="Home" asp-action="Logout">Logout</a>
    </nav>

    <i class="fas fa-bars hamburger" id="hamburgerBtn"></i>
</header>

<nav class="mobile-nav" id="mobileNav">
    <a asp-controller="Home" asp-action="Index">Home</a>
        <a asp-controller="Home" asp-action="Products">Products</a>
        <a asp-controller="Home" asp-action="Cart">Cart</a>
        <a asp-controller="Home" asp-action="AllOrders">Orders</a>
        <a asp-controller="Home" asp-action="About">About</a>
        <a asp-controller="Home" asp-action="Contact">Contact</a>
        <a asp-controller="Home" asp-action="Logout">Logout</a>
</nav>

<main>
    <h2>Checkout</h2>

    @if (!Model.Any())
    {
        <p>Your cart is empty.</p>
    }
    else
    {
        <table>
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Qty</th>
                    <th>Price</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.ProductName</td>
                        <td>@item.Quantity</td>
                        <td>@item.Price.ToString("C")</td>
                        <td>@((item.Price * item.Quantity).ToString("C"))</td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3">Grand Total:</td>
                    <td>@Model.Sum(i => i.Price * i.Quantity).ToString("C")</td>
                </tr>
            </tfoot>
        </table>

        <form method="post" asp-action="PlaceOrder" class="checkout-form">
            <div>
                <label for="Name">Name</label>
                <input type="text" name="Name" id="Name" required />
            </div>
            <div>
                <label for="Address">Address</label>
                <input type="text" name="Address" id="Address" required />
            </div>
            <div>
                <label for="Phone">Phone</label>
                <input type="text" name="Phone" id="Phone" required />
            </div>
            <div style="margin-top: 20px; text-align: right;">
                <button type="submit" class="btn btn-primary">Confirm Order</button>
            </div>
        </form>
    }
</main>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const hamburgerBtn = document.getElementById("hamburgerBtn");
        const mobileNav = document.getElementById("mobileNav");

        if (hamburgerBtn && mobileNav) {
            hamburgerBtn.addEventListener("click", () => {
                mobileNav.classList.toggle("show");
                hamburgerBtn.classList.toggle("active");
            });
        }
    });
</script>
